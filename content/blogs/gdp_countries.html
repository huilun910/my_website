---
categories:  
- ""    #the front matter should be like the one found in, e.g., blog2.md. It cannot be like the normal Rmd we used
- ""
date: "2021-10-18"
description: GDP components for countries # the title that will show up once someone gets to this page
dge: spices.jpg # save picture in \static\img\blogs. Acceptable formats= jpg, jpeg, or png . Your iPhone pics wont work

keywords: ""
slug: gdp_countries # slug is the shorthand URL address... no spaces plz
title: GDP Components Analysis for Different Countries
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>


<pre><code>## -- Attaching packages --------------------------------------- tidyverse 1.3.1 --</code></pre>
<pre><code>## v ggplot2 3.3.5     v purrr   0.3.4
## v tibble  3.1.4     v dplyr   1.0.7
## v tidyr   1.1.3     v stringr 1.4.0
## v readr   2.0.1     v forcats 0.5.1</code></pre>
<pre><code>## -- Conflicts ------------------------------------------ tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre><code>## Registered S3 method overwritten by &#39;mosaic&#39;:
##   method                           from   
##   fortify.SpatialPolygonsDataFrame ggplot2</code></pre>
<pre><code>## 
## The &#39;mosaic&#39; package masks several functions from core packages in order to add 
## additional features.  The original behavior of these functions should not be affected by this.</code></pre>
<pre><code>## 
## Attaching package: &#39;mosaic&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:Matrix&#39;:
## 
##     mean</code></pre>
<pre><code>## The following objects are masked from &#39;package:dplyr&#39;:
## 
##     count, do, tally</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     cross</code></pre>
<pre><code>## The following object is masked from &#39;package:ggplot2&#39;:
## 
##     stat</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     binom.test, cor, cor.test, cov, fivenum, IQR, median, prop.test,
##     quantile, sd, t.test, var</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     max, mean, min, prod, range, sample, sum</code></pre>
<pre><code>## 
## Attaching package: &#39;ggthemes&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:mosaic&#39;:
## 
##     theme_map</code></pre>
<pre><code>## Registered S3 method overwritten by &#39;GGally&#39;:
##   method from   
##   +.gg   ggplot2</code></pre>
<pre><code>## here() starts at C:/R Projects/my_website</code></pre>
<pre><code>## 
## Attaching package: &#39;skimr&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:mosaic&#39;:
## 
##     n_missing</code></pre>
<pre><code>## 
## Attaching package: &#39;janitor&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     chisq.test, fisher.test</code></pre>
<pre><code>## Loading required package: lubridate</code></pre>
<pre><code>## 
## Attaching package: &#39;lubridate&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     date, intersect, setdiff, union</code></pre>
<pre><code>## Loading required package: PerformanceAnalytics</code></pre>
<pre><code>## Loading required package: xts</code></pre>
<pre><code>## Loading required package: zoo</code></pre>
<pre><code>## 
## Attaching package: &#39;zoo&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     as.Date, as.Date.numeric</code></pre>
<pre><code>## 
## Attaching package: &#39;xts&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:dplyr&#39;:
## 
##     first, last</code></pre>
<pre><code>## 
## Attaching package: &#39;PerformanceAnalytics&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:graphics&#39;:
## 
##     legend</code></pre>
<pre><code>## Loading required package: quantmod</code></pre>
<pre><code>## Loading required package: TTR</code></pre>
<pre><code>## Registered S3 method overwritten by &#39;quantmod&#39;:
##   method            from
##   as.zoo.data.frame zoo</code></pre>
<pre><code>## == Need to Learn tidyquant? ====================================================
## Business Science offers a 1-hour course - Learning Lab #9: Performance Analysis &amp; Portfolio Optimization with tidyquant!
## &lt;/&gt; Learn more at: https://university.business-science.io/p/learning-labs-pro &lt;/&gt;</code></pre>
<pre><code>## 
## Attaching package: &#39;infer&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:mosaic&#39;:
## 
##     prop_test, t_test</code></pre>
<pre><code>## Loading required package: airports</code></pre>
<pre><code>## Loading required package: cherryblossom</code></pre>
<pre><code>## Loading required package: usdata</code></pre>
<pre><code>## 
## Attaching package: &#39;openintro&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:mosaic&#39;:
## 
##     dotPlot</code></pre>
<pre><code>## The following objects are masked from &#39;package:lattice&#39;:
## 
##     ethanol, lsegments</code></pre>
<pre class="r"><code>UN_GDP_data  &lt;-  read_excel(here::here(&quot;data&quot;, &quot;Download-GDPconstant-USD-countries.xlsx&quot;), # Excel filename
                sheet=&quot;Download-GDPconstant-USD-countr&quot;, # Sheet name
                skip=2) # Number of rows to skip


head(UN_GDP_data)</code></pre>
<pre><code>## # A tibble: 6 x 53
##   CountryID Country     IndicatorName  `1970` `1971` `1972` `1973` `1974` `1975`
##       &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;           &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1         4 Afghanistan Final consump~ 3.07e9 2.96e9 2.89e9 3.10e9 3.33e9 3.51e9
## 2         4 Afghanistan Household con~ 2.73e9 2.61e9 2.53e9 2.72e9 2.94e9 3.01e9
## 3         4 Afghanistan General gover~ 3.29e8 3.38e8 3.53e8 3.70e8 3.81e8 4.98e8
## 4         4 Afghanistan Gross capital~ 1.65e9 1.76e9 1.62e9 1.57e9 1.91e9 2.26e9
## 5         4 Afghanistan Gross fixed c~ 1.65e9 1.76e9 1.54e9 1.54e9 1.98e9 2.29e9
## 6         4 Afghanistan Exports of go~ 1.55e8 2.00e8 2.42e8 3.01e8 4.08e8 4.53e8
## # ... with 44 more variables: 1976 &lt;dbl&gt;, 1977 &lt;dbl&gt;, 1978 &lt;dbl&gt;, 1979 &lt;dbl&gt;,
## #   1980 &lt;dbl&gt;, 1981 &lt;dbl&gt;, 1982 &lt;dbl&gt;, 1983 &lt;dbl&gt;, 1984 &lt;dbl&gt;, 1985 &lt;dbl&gt;,
## #   1986 &lt;dbl&gt;, 1987 &lt;dbl&gt;, 1988 &lt;dbl&gt;, 1989 &lt;dbl&gt;, 1990 &lt;dbl&gt;, 1991 &lt;dbl&gt;,
## #   1992 &lt;dbl&gt;, 1993 &lt;dbl&gt;, 1994 &lt;dbl&gt;, 1995 &lt;dbl&gt;, 1996 &lt;dbl&gt;, 1997 &lt;dbl&gt;,
## #   1998 &lt;dbl&gt;, 1999 &lt;dbl&gt;, 2000 &lt;dbl&gt;, 2001 &lt;dbl&gt;, 2002 &lt;dbl&gt;, 2003 &lt;dbl&gt;,
## #   2004 &lt;dbl&gt;, 2005 &lt;dbl&gt;, 2006 &lt;dbl&gt;, 2007 &lt;dbl&gt;, 2008 &lt;dbl&gt;, 2009 &lt;dbl&gt;,
## #   2010 &lt;dbl&gt;, 2011 &lt;dbl&gt;, 2012 &lt;dbl&gt;, 2013 &lt;dbl&gt;, 2014 &lt;dbl&gt;, 2015 &lt;dbl&gt;, ...</code></pre>
<pre class="r"><code>ncol(UN_GDP_data) </code></pre>
<pre><code>## [1] 53</code></pre>
<pre class="r"><code>tidy_GDP_data  &lt;- UN_GDP_data %&gt;%  
  pivot_longer(cols = 4:51, #columns 4 to 51
               names_to = &quot;Year&quot;,
               values_to = &quot;Country_GDP&quot;) %&gt;% 
  mutate(Country_GDP = Country_GDP/1e9)

head(tidy_GDP_data)</code></pre>
<pre><code>## # A tibble: 6 x 7
##   CountryID Country     IndicatorName          `2018`   `2019` Year  Country_GDP
##       &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;                   &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;
## 1         4 Afghanistan Final consumption ~   2.13e10  2.46e10 1970         3.07
## 2         4 Afghanistan Final consumption ~   2.13e10  2.46e10 1971         2.96
## 3         4 Afghanistan Final consumption ~   2.13e10  2.46e10 1972         2.89
## 4         4 Afghanistan Final consumption ~   2.13e10  2.46e10 1973         3.10
## 5         4 Afghanistan Final consumption ~   2.13e10  2.46e10 1974         3.33
## 6         4 Afghanistan Final consumption ~   2.13e10  2.46e10 1975         3.51</code></pre>
<pre class="r"><code>country_list &lt;- c(&quot;United States&quot;,&quot;India&quot;, &quot;Germany&quot;) #Compare GDP components for these 3 countries


unique(tidy_GDP_data[c(&quot;IndicatorName&quot;)])</code></pre>
<pre><code>## # A tibble: 17 x 1
##    IndicatorName                                                                
##    &lt;chr&gt;                                                                        
##  1 Final consumption expenditure                                                
##  2 Household consumption expenditure (including Non-profit institutions serving~
##  3 General government final consumption expenditure                             
##  4 Gross capital formation                                                      
##  5 Gross fixed capital formation (including Acquisitions less disposals of valu~
##  6 Exports of goods and services                                                
##  7 Imports of goods and services                                                
##  8 Gross Domestic Product (GDP)                                                 
##  9 Agriculture, hunting, forestry, fishing (ISIC A-B)                           
## 10 Mining, Manufacturing, Utilities (ISIC C-E)                                  
## 11 Manufacturing (ISIC D)                                                       
## 12 Construction (ISIC F)                                                        
## 13 Wholesale, retail trade, restaurants and hotels (ISIC G-H)                   
## 14 Transport, storage and communication (ISIC I)                                
## 15 Other Activities (ISIC J-P)                                                  
## 16 Total Value Added                                                            
## 17 Changes in inventories</code></pre>
<pre class="r"><code>raw_GDP_component_list &lt;- c(&quot;Gross capital formation&quot;, &quot;Exports of goods and services&quot;, &quot;General government final consumption expenditure&quot;, &quot;Household consumption expenditure (including Non-profit institutions serving households)&quot;, &quot;Imports of goods and services&quot;, &quot;Gross Domestic Product (GDP)&quot;)

GDP_component_list &lt;- c(&quot;Gross capital formation&quot;, &quot;Exports&quot;, &quot;Government expenditure&quot;, &quot;Household expenditure&quot;,&quot;Imports&quot;,&quot;GDP&quot;)

three_countries_data &lt;- tidy_GDP_data %&gt;% 
  filter(Country %in% country_list) %&gt;% 
  mutate(IndicatorName = factor(IndicatorName,
                                levels = raw_GDP_component_list,
                                labels = GDP_component_list)) %&gt;% 
    filter(IndicatorName %in% GDP_component_list) 

three_countries_data_no_GDP &lt;- three_countries_data %&gt;% 
  filter(IndicatorName != &quot;GDP&quot;)

#head(plot_three_countries)

plot_three_countries &lt;- ggplot(three_countries_data_no_GDP, aes(x = Year, 
                                 y = Country_GDP, 
                                 group = IndicatorName, 
                                 colour = IndicatorName))+
  scale_x_discrete(breaks = seq(1970, 2020, by = 10)) +
  geom_line(size = 1) +
  facet_wrap(vars(Country), scales = &quot;free_x&quot;) +
  theme_bw()+
  labs (
    title = &quot;GDP components over time&quot;,
    subtitle = &quot;In constant 2010 USD&quot;,
    x = &quot;&quot;,
    y = &quot;Billion US$&quot; ) + 
  guides(color=guide_legend(title=&quot;Components of GDP&quot;)) +
  NULL

plot_three_countries</code></pre>
<p><img src="/blogs/gdp_countries_files/figure-html/unnamed-chunk-2-1.png" width="960" /></p>
